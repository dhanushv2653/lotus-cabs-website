<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lotus Cabs</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >

  <!-- Bootstrap Icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    rel="stylesheet"
  >
  <!-- Font style -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
  href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
  rel="stylesheet"
>
<!-- Css Link -->
  <link rel="stylesheet" href="public/css/styles.css">
</head>

<body>
<!-- NAVBAR START -->
<nav class="navbar navbar-expand-lg bg-white shadow ">
  <div class="container">

    <!-- Logo -->
    <a class="navbar-brand fw-bold d-flex align-items-center gap-2" href="index.html">
  <img
    src="assets/icons/lc logo text 1.png"
    alt="Lotus Cabs"
    class="navbar-logo"
    
    
  />
    <span class="brand-text"></span>
</a>

    <!-- Menu -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-lg-center gap-3">
        <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
        <li class="nav-item"><a class="nav-link" href="fleet.html">Fleet</a></li>
        <li class="nav-item"><a class="nav-link" href="booking.html">Book Ride</a></li>
        <li class="nav-item">
          <a class="btn btn-phone ms-lg-3 " href="tel:+919845002690">
            <img 
              src="assets/icons/phone icon.svg"alt="Phone"class="icon-phone"/>
            <i class="bi bi-telephone"></i> +91 9845002690
          </a>
        </li>
      </ul>
    </div>

  </div>
</nav>
<!-- NAVBAR END -->
<section class="about-hero">
  <div class="container">
    <div class="about-hero__inner">
      <div class="row align-items-center gy-5">

        <div class="col-lg-6 booking-panel">
            
          <div class="booking-image-full">
            <img src="assets/hero-section/car parking.jpg" alt="book your ride">
          </div>
        </div>

        <div class="col-lg-6">
          <span class="why-badge">Book your ride</span>

          <h1 class="why-title text-start mt-3">
          Enter Ride Details<br>
          </h1>

          <p class="why-desc text-start mt-4">
          Enter your trip details and our team will contact you shortly to confirm your ride.
          </p>
         <form id="bookingForm" class="mt-4">
<!-- Name -->
  <input
    type="text"
    id="customerName"
    name="name"
    class="form-control mb-3"
    placeholder="Your Name"
    required
  >

  <!-- Mobile -->
  <input
    type="tel"
    id="mobile"
    name="mobile"
    class="form-control mb-3"
    placeholder="Mobile Number"
    required
  >
  <!-- Ride Type -->
  <select id="rideType" name="rideType" class="form-control mb-3" required>
    <option value="">Ride Type</option>
    <option value="local">Local (within city)</option>
    <option value="outstation">Outstation</option>
    <option value="airport">Airport Transfer</option>
  </select>

  <!-- Vehicle -->
  <select id="vehicle" name="vehicle" class="form-control mb-3" required>
    <option value="">Vehicle Type</option>
  <option value="Luxury Executive">Luxury</option>
  <option value="Comfort Sedan">Sedan</option>
  <option value="Spacious SUV">SUV</option>
  <option value="Premium Group Travel">Premium Group Travel</option>
  </select>

  <!-- Pickup City -->
  <select id="pickup" name="pickupCity" class="form-control mb-3" required>
    <option value="">Pickup City</option>
    <option>Bangalore</option>
    <option>Chennai</option>
    <option>Mumbai</option>
  </select>

  <!-- Drop City -->
  <select id="drop" name="dropCity" class="form-control mb-3" required>
    <option value="">Drop City</option>
    <option>Bangalore</option>
    <option>Chennai</option>
    <option>Mumbai</option>
  </select>

  <!-- Pickup Address -->
  <input
    type="text"
    id="pickupAddress"
    name="pickupAddress"
    class="form-control mb-3"
    placeholder="Pickup Address"
    required
  >

  <!-- Date -->
   <label for="rideDate" class="form-label">Date</label>
 <input 
  type="date"
  id="rideDate"
  name="date"
  class="form-control mb-3"
  min=""
  required
>
<small class="text-muted">Please select pickup time</small>
  <!-- Time -->
  <input
    type="time"
    id="rideTime"
    name="time"
    class="form-control mb-3"
    required
  >



  

  <!-- Notes (optional) -->
  <textarea
    id="notes"
    name="instructions"
    class="form-control mb-4"
    rows="2"
    placeholder="Special instructions (optional)"
  ></textarea>
<div id="captchaContainer" style="display:none;">
  <div class="g-recaptcha mb-3" data-sitekey="6LcWMHgsAAAAANWmXoARWL24kheFiBHFwnPOvr-L"></div>
</div>
  <button type="submit" class="btn btn-phone w-100">
    Book Now
  </button>

</form>

        </div>

      </div>
    </div>
  </div>
</section>
 
<!--Footer-->

<footer class="site-footer ">
  <div class="container">

    <!-- TOP -->
    <div class="row footer-top">

      <!-- BRAND -->
      <div class="col-lg-6 mb-4 mb-lg-0">
        <a href="/" class="brand-wrap mb-3 d-inline-flex">
          <img
            src="assets/icons/lc logo text 1.png"
            alt="Lotus Cabs"
            class="brand-logo footer-logo"
          />
          <span class="brand-text text-white"></span>
        </a>

        <p class="footer-desc">
          Your dependable partner for inter-city and local travel across India.
          Safe, clean and always on time.
        </p>

        <p class="footer-contact">
          <i class="bi bi-telephone me-2"></i> +91 9845002690
        </p>
        <p class="footer-contact">
          <i class="bi bi-envelope me-2"></i> lotuscabs@gmail.com
        </p>
      </div>

      <!-- LINKS -->
      <div class="col-lg-6">
        <div class="row">

          <div class="col-md-6 mb-3">
            <h6 class="footer-heading">Company</h6>
            <ul class="footer-links">
              <li><a href="#">About Us</a></li>
            </ul>
          </div>

          <div class="col-md-6">
            <h6 class="footer-heading">Legal</h6>
            <ul class="footer-links">
              <li><a href="#">Terms & Conditions</a></li>
            </ul>
          </div>

        </div>
      </div>

    </div>

    <!-- DIVIDER -->
    <hr class="footer-divider">

    <!-- BOTTOM -->
    <div class="footer-bottom">
      <span>Â© 2026 Lotus Cabs. All rights reserved.</span>
      <span>Designed for reliability</span>
    </div>

  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  const requiredFields = ["pickupCity", "dropCity", "name", "mobile"];
const captchaContainer = document.getElementById("captchaContainer");
const today = new Date().toISOString().split("T")[0];
document.getElementById("rideDate").setAttribute("min", today);
function checkRequiredFields() {
  let allFilled = true;

  requiredFields.forEach(id => {
    const field = document.querySelector(`[name="${id}"]`);
    if (!field || !field.value.trim()) {
      allFilled = false;
    }
  });

  if (allFilled) {
    captchaContainer.style.display = "block";
  } else {
    captchaContainer.style.display = "none";
    grecaptcha.reset(); // reset if they remove something
  }
}

requiredFields.forEach(id => {
  const field = document.querySelector(`[name="${id}"]`);
  field.addEventListener("input", checkRequiredFields);
});
function convertTo12HourFormat(time24) {
  if (!time24) return "";

  const [hours, minutes] = time24.split(":");
  let hour = parseInt(hours);
  const ampm = hour >= 12 ? "PM" : "AM";

  hour = hour % 12;
  hour = hour ? hour : 12; // 0 becomes 12

  return `${hour}:${minutes} ${ampm}`;
}
document.getElementById("bookingForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const button = this.querySelector("button");
  button.disabled = true;
  button.innerText = "Processing...";

  const formData = new FormData(this);
  const data = Object.fromEntries(formData.entries());
  data.time = convertTo12HourFormat(data.time);

  console.log("Form Data:", data);

  // ===== Basic Frontend Validation FIRST =====
 if (!data.pickupCity || !data.dropCity || !data.name || !data.mobile) {
  alert("Please fill all required fields");
  button.disabled = false;
  button.innerText = "Book Now";
  return;
}

  // ===== Get Captcha Token =====
  const recaptchaToken = grecaptcha.getResponse();

  if (!recaptchaToken) {
    alert("Please complete the captcha");
    button.disabled = false;
    button.innerText = "Book Now";
    return;
  }

  try {
    const response = await fetch("/api/book", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        ...data,
        recaptchaToken
      })
    });

    const result = await response.json();

    if (result.success) {
      this.innerHTML = `
        <div class="alert alert-success mt-3">
          âœ… Booking request received! Our team will contact you shortly.
        </div>
      `;
    } else {
      alert(result.message || "Error submitting form");

      grecaptcha.reset();  // ðŸ”¥ Important

      button.disabled = false;
      button.innerText = "Book Now";
    }

  } catch (err) {
    alert("Server error");

    grecaptcha.reset();  // ðŸ”¥ Important

    button.disabled = false;
    button.innerText = "Book Now";
  }
});
</script>
</body>
</html>
